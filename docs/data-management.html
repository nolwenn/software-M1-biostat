<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data management | Little e-book for MPH1 computer labs</title>
  <meta name="description" content="This is a little book of essential biostatistic concepts for Master 1 in Public Health." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data management | Little e-book for MPH1 computer labs" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a little book of essential biostatistic concepts for Master 1 in Public Health." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data management | Little e-book for MPH1 computer labs" />
  
  <meta name="twitter:description" content="This is a little book of essential biostatistic concepts for Master 1 in Public Health." />
  

<meta name="author" content="Nolwenn Le Meur, PhD - EHESP associate professor in Biostatistics and Bioinformatic" />


<meta name="date" content="2022-07-05" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-type-and-data-format.html"/>
<link rel="next" href="descriptive-statistics.html"/>
<script src="libs/header-attrs-2.12/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li><a href="index.html#introduction">Introduction<span></span></a></li>
<li class="chapter" data-level="1" data-path="programming-environment.html"><a href="programming-environment.html"><i class="fa fa-check"></i><b>1</b> Programming environment<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="programming-environment.html"><a href="programming-environment.html#installation-r-and-stata"><i class="fa fa-check"></i><b>1.1</b> Installation R and Stata<span></span></a></li>
<li class="chapter" data-level="1.2" data-path="programming-environment.html"><a href="programming-environment.html#r-packages"><i class="fa fa-check"></i><b>1.2</b> R packages<span></span></a></li>
<li class="chapter" data-level="1.3" data-path="programming-environment.html"><a href="programming-environment.html#working-directory"><i class="fa fa-check"></i><b>1.3</b> Working directory<span></span></a>
<ul>
<li><a href="programming-environment.html#r">R<span></span></a></li>
<li><a href="programming-environment.html#stata">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="programming-environment.html"><a href="programming-environment.html#log-files-and-history"><i class="fa fa-check"></i><b>1.4</b> Log files and history<span></span></a>
<ul>
<li><a href="programming-environment.html#r-1">R<span></span></a></li>
<li><a href="programming-environment.html#stata-1">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="programming-environment.html"><a href="programming-environment.html#importing-data"><i class="fa fa-check"></i><b>1.5</b> Importing Data<span></span></a>
<ul>
<li><a href="programming-environment.html#r-2">R<span></span></a></li>
<li><a href="programming-environment.html#stata-2">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="programming-environment.html"><a href="programming-environment.html#saving-and-loading-r-and-stata-files"><i class="fa fa-check"></i><b>1.6</b> Saving and loading R and Stata files<span></span></a>
<ul>
<li><a href="programming-environment.html#r-3">R<span></span></a></li>
<li><a href="programming-environment.html#stata-3">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="programming-environment.html"><a href="programming-environment.html#delete-data-from-workspace"><i class="fa fa-check"></i><b>1.7</b> Delete data from workspace<span></span></a>
<ul>
<li><a href="programming-environment.html#r-4">R<span></span></a></li>
<li><a href="programming-environment.html#stata-4">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="programming-environment.html"><a href="programming-environment.html#data-quick-overview"><i class="fa fa-check"></i><b>1.8</b> Data quick overview<span></span></a>
<ul>
<li><a href="programming-environment.html#r-5">R<span></span></a></li>
<li><a href="programming-environment.html#stata-5">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.9" data-path="programming-environment.html"><a href="programming-environment.html#help-pages"><i class="fa fa-check"></i><b>1.9</b> Help pages<span></span></a>
<ul>
<li><a href="programming-environment.html#r-6">R<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.10" data-path="programming-environment.html"><a href="programming-environment.html#function-call"><i class="fa fa-check"></i><b>1.10</b> Function call<span></span></a>
<ul>
<li><a href="programming-environment.html#r-7">R<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html"><i class="fa fa-check"></i><b>2</b> Data type and data format<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#data-type"><i class="fa fa-check"></i><b>2.1</b> Data type<span></span></a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#numeric"><i class="fa fa-check"></i><b>2.1.1</b> Numeric<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-8">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-8">Stata<span></span></a></li>
<li class="chapter" data-level="2.1.2" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#logical"><i class="fa fa-check"></i><b>2.1.2</b> Logical<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-9">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-9">Stata<span></span></a></li>
<li class="chapter" data-level="2.1.3" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#date"><i class="fa fa-check"></i><b>2.1.3</b> Date<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-10">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-10">Stata<span></span></a></li>
<li class="chapter" data-level="2.1.4" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#character"><i class="fa fa-check"></i><b>2.1.4</b> Character<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-11">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-11">Stata<span></span></a></li>
<li class="chapter" data-level="2.1.5" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#factor"><i class="fa fa-check"></i><b>2.1.5</b> Factor<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-12">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-12">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#data-format"><i class="fa fa-check"></i><b>2.2</b> Data format<span></span></a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#vector"><i class="fa fa-check"></i><b>2.2.1</b> Vector<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-13">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-13">Stata<span></span></a></li>
<li class="chapter" data-level="2.2.2" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#matrix"><i class="fa fa-check"></i><b>2.2.2</b> Matrix<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-14">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-14">Stata<span></span></a></li>
<li class="chapter" data-level="2.2.3" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#data-set"><i class="fa fa-check"></i><b>2.2.3</b> Data (set)<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-15">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-15">Stata<span></span></a></li>
<li class="chapter" data-level="2.2.4" data-path="data-type-and-data-format.html"><a href="data-type-and-data-format.html#list"><i class="fa fa-check"></i><b>2.2.4</b> List<span></span></a></li>
<li><a href="data-type-and-data-format.html#r-16">R<span></span></a></li>
<li><a href="data-type-and-data-format.html#stata-16">Stata<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-management.html"><a href="data-management.html"><i class="fa fa-check"></i><b>3</b> Data management<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-management.html"><a href="data-management.html#renaming-variables"><i class="fa fa-check"></i><b>3.1</b> Renaming variables<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="data-management.html"><a href="data-management.html#missing-values"><i class="fa fa-check"></i><b>3.2</b> Missing values<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="data-management.html"><a href="data-management.html#create-new-variables"><i class="fa fa-check"></i><b>3.3</b> Create new variables<span></span></a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-management.html"><a href="data-management.html#changing-scale"><i class="fa fa-check"></i><b>3.3.1</b> Changing scale<span></span></a></li>
<li class="chapter" data-level="3.3.2" data-path="data-management.html"><a href="data-management.html#from-continuous-to-categorical"><i class="fa fa-check"></i><b>3.3.2</b> From continuous to categorical<span></span></a></li>
<li class="chapter" data-level="3.3.3" data-path="data-management.html"><a href="data-management.html#dummy-variables"><i class="fa fa-check"></i><b>3.3.3</b> Dummy variables<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-management.html"><a href="data-management.html#merging-data-set"><i class="fa fa-check"></i><b>3.4</b> Merging data set<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html"><i class="fa fa-check"></i><b>4</b> Descriptive statistics<span></span></a>
<ul>
<li class="chapter" data-level="4.1" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#quick-summary-statistics"><i class="fa fa-check"></i><b>4.1</b> Quick summary statistics<span></span></a>
<ul>
<li><a href="descriptive-statistics.html#r-24">R<span></span></a></li>
<li><a href="descriptive-statistics.html#stata-24">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#central-and-deviation-parameters"><i class="fa fa-check"></i><b>4.2</b> Central and deviation parameters<span></span></a>
<ul>
<li><a href="descriptive-statistics.html#r-25">R<span></span></a></li>
<li><a href="descriptive-statistics.html#stata-25">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#confidence-interval"><i class="fa fa-check"></i><b>4.3</b> Confidence interval<span></span></a>
<ul>
<li><a href="descriptive-statistics.html#r-26">R<span></span></a></li>
<li><a href="descriptive-statistics.html#stata-26">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="descriptive-statistics.html"><a href="descriptive-statistics.html#cross-table"><i class="fa fa-check"></i><b>4.4</b> Cross table<span></span></a>
<ul>
<li><a href="descriptive-statistics.html#r-27">R<span></span></a></li>
<li><a href="descriptive-statistics.html#stata-27">Stata<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>5</b> Plotting<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="plotting.html"><a href="plotting.html#quantitative-data"><i class="fa fa-check"></i><b>5.1</b> Quantitative data<span></span></a>
<ul>
<li><a href="plotting.html#r-28">R<span></span></a></li>
<li><a href="plotting.html#stata-28">Stata<span></span></a></li>
<li><a href="plotting.html#r-29">R<span></span></a></li>
<li><a href="plotting.html#stata-29">Stata<span></span></a></li>
<li><a href="plotting.html#r-30">R<span></span></a></li>
<li><a href="plotting.html#stata-30">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="plotting.html"><a href="plotting.html#qualitative-data-categorical"><i class="fa fa-check"></i><b>5.2</b> Qualitative data (categorical)<span></span></a>
<ul>
<li><a href="plotting.html#r-31">R<span></span></a></li>
<li><a href="plotting.html#stata-31">Stata<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="univariate-statistical-test.html"><a href="univariate-statistical-test.html"><i class="fa fa-check"></i><b>6</b> Univariate statistical test<span></span></a>
<ul>
<li class="chapter" data-level="6.1" data-path="univariate-statistical-test.html"><a href="univariate-statistical-test.html#quantitative-data-1"><i class="fa fa-check"></i><b>6.1</b> Quantitative data<span></span></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="univariate-statistical-test.html"><a href="univariate-statistical-test.html#two-groups-comparison"><i class="fa fa-check"></i><b>6.1.1</b> Two groups comparison<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-32">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-32">Stata<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-33">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-33">Stata<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-34">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-34">Stata<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-35">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-35">Stata<span></span></a></li>
<li class="chapter" data-level="6.1.2" data-path="univariate-statistical-test.html"><a href="univariate-statistical-test.html#anova"><i class="fa fa-check"></i><b>6.1.2</b> ANOVA or Kruskal-Wallis tests<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-36">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-36">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="univariate-statistical-test.html"><a href="univariate-statistical-test.html#qualitative-data-categorical-1"><i class="fa fa-check"></i><b>6.2</b> Qualitative data (categorical)<span></span></a>
<ul>
<li><a href="univariate-statistical-test.html#r-37">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-37">Stata<span></span></a></li>
<li><a href="univariate-statistical-test.html#r-38">R<span></span></a></li>
<li><a href="univariate-statistical-test.html#stata-38">Stata<span></span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="regression-model.html"><a href="regression-model.html"><i class="fa fa-check"></i><b>7</b> Regression model<span></span></a>
<ul>
<li class="chapter" data-level="7.1" data-path="regression-model.html"><a href="regression-model.html#linear-regression"><i class="fa fa-check"></i><b>7.1</b> Linear regression<span></span></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="regression-model.html"><a href="regression-model.html#simple-linear-regression"><i class="fa fa-check"></i><b>7.1.1</b> Simple Linear regression<span></span></a></li>
<li><a href="regression-model.html#r-39">R<span></span></a></li>
<li><a href="regression-model.html#stata-39">Stata<span></span></a></li>
<li><a href="regression-model.html#r-40">R<span></span></a></li>
<li><a href="regression-model.html#stata-40">Stata<span></span></a></li>
<li class="chapter" data-level="7.1.2" data-path="regression-model.html"><a href="regression-model.html#multivariate-linear-regression"><i class="fa fa-check"></i><b>7.1.2</b> multivariate linear regression<span></span></a></li>
<li><a href="regression-model.html#r-41">R<span></span></a></li>
<li><a href="regression-model.html#stata-41">Stata<span></span></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="regression-model.html"><a href="regression-model.html#logistic-regression"><i class="fa fa-check"></i><b>7.2</b> logistic regression<span></span></a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="regression-model.html"><a href="regression-model.html#simple-logistic-regression"><i class="fa fa-check"></i><b>7.2.1</b> simple logistic regression<span></span></a></li>
<li><a href="regression-model.html#r-42">R<span></span></a></li>
<li><a href="regression-model.html#stata-42">Stata<span></span></a></li>
<li class="chapter" data-level="7.2.2" data-path="regression-model.html"><a href="regression-model.html#multivariate-logistic-regression"><i class="fa fa-check"></i><b>7.2.2</b> multivariate logistic regression<span></span></a></li>
<li><a href="regression-model.html#r-43">R<span></span></a></li>
<li><a href="regression-model.html#stata-43">Stata<span></span></a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Little e-book for MPH1 computer labs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-management" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data management<a href="data-management.html#data-management" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="renaming-variables" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Renaming variables<a href="data-management.html#renaming-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Variables names are not always explicit and you might want to rename some.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 30px;">
<div id="r-17" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong> <em>data.frame</em>, variables are in column and to retrieve their names you can use the <em>colnames()</em> function. It will return a vector which values can be accessed and modify using indexing.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-management.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sleep)</span>
<span id="cb1-2"><a href="data-management.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(sleep)[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="st">&quot;identifier&quot;</span></span></code></pre></div>
<p>Note : <em>rownames()</em> does also exist if you need to access and manipulate the individuals</p>
</div>
<div id="stata-17" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-17" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong>, one way is to use the <em>rename</em> function.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="data-management.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> number identifier</span></code></pre></div>
</div>
</div>
</div>
<div id="missing-values" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Missing values<a href="data-management.html#missing-values" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Missing values are always problematic. First, because it is often difficult to know why they are missing: not answered, not attributable, lost in follow-up, miss recording…They can be largely missing for an individuals as well as for a specific variable.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 30px;">
<div id="r-18" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong>, you can assess the number missing values with the <em>summary()</em> function or the <em>is.na()</em> conditional testing function.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-management.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(sleep<span class="sc">$</span>age)</span></code></pre></div>
<p>A basic and crude method is to replace missing value by a value such as the average value. For the variable age, let’s replace the missing value by the mean age of sample using the indexing technique.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-management.html#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create a fake missing value</span></span>
<span id="cb4-2"><a href="data-management.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for individual #1</span></span>
<span id="cb4-3"><a href="data-management.html#cb4-3" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb4-4"><a href="data-management.html#cb4-4" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## [1] NA 59 54 53 51</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-management.html#cb6-1" aria-hidden="true" tabindex="-1"></a>na_id <span class="ot">&lt;-</span> <span class="fu">is.na</span>(sleep<span class="sc">$</span>age)</span>
<span id="cb6-2"><a href="data-management.html#cb6-2" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age[na_id] <span class="ot">&lt;-</span> <span class="fu">mean</span>(sleep<span class="sc">$</span>age,</span>
<span id="cb6-3"><a href="data-management.html#cb6-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">na.rm=</span><span class="cn">TRUE</span>)</span>
<span id="cb6-4"><a href="data-management.html#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(sleep<span class="sc">$</span>age[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],<span class="dv">0</span>)</span></code></pre></div>
<pre><code>## [1] 48 59 54 53 51</code></pre>
</div>
<div id="stata-18" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-18" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong> an overview of the missing data can be done as follow:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="data-management.html#cb8-1" aria-hidden="true" tabindex="-1"></a>misstable <span class="kw">summarize</span></span>
<span id="cb8-2"><a href="data-management.html#cb8-2" aria-hidden="true" tabindex="-1"></a>misstable <span class="kw">patterns</span></span></code></pre></div>
<p>To replace one missing value by the mean of the variable, do</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="data-management.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> age = <span class="kw">mean</span>(age) <span class="kw">if</span> <span class="fu">missing</span>(age)</span></code></pre></div>
</div>
</div>
<p>Above a certain threshold that varies, from 4% to 20%, researchers try to do multiple imputation of missing values. Although there is no perfect solution, there are basically 3 scenario and associated imputation techniques. Data are missing completely at random (MCAR) or data are missing at random (MAR) or data are missing not at random (MNAR). For the latest, it would be difficult to perform a legitimate analysis. This advanced topic is not covered in MPH1 class but see below for references if needed.</p>
<p>For multiple imputation with <strong>R</strong> see the package <a href="https://cran.r-project.org/web/packages/mice/index.html"><em>Mice</em></a> for more sophisticated missing values imputation</p>
<p>For multiple imputation with <strong>Stata</strong> see <a href="https://www.stata.com/meeting/switzerland16/slides/medeiros-switzerland16.pdf">Rose Meideiros</a> presentation.</p>
</div>
<div id="create-new-variables" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Create new variables<a href="data-management.html#create-new-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="changing-scale" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Changing scale<a href="data-management.html#changing-scale" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In epidemiology, you may have to transform and change the scale of your variables. For instance, a logarithm transformation might help approximate a Normal distribution for some skewed continuous variable. You might also want to normalized or standardized (sometimes called z-score) your data. When you normalize, you bring all the values between 0 and 1, while preserving the distances between the values. When you standardize, you bring all the values between 0 and 1 with a mean <span class="math inline">\(\mu\)</span> to 0 and a standard deviation <span class="math inline">\(\sigma\)</span> to 1.</p>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div id="r-19" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong> the transformation can only be some simple computation:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-management.html#cb10-1" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age_log <span class="ot">&lt;-</span> <span class="fu">log</span>(sleep<span class="sc">$</span>age)</span>
<span id="cb10-2"><a href="data-management.html#cb10-2" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age_sqr <span class="ot">&lt;-</span> sleep<span class="sc">$</span>age<span class="sc">^</span><span class="dv">2</span></span></code></pre></div>
<p>To normalize or standardize, you can do:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-management.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># normalization</span></span>
<span id="cb11-2"><a href="data-management.html#cb11-2" aria-hidden="true" tabindex="-1"></a>minage <span class="ot">&lt;-</span> sleep<span class="sc">$</span>age </span>
<span id="cb11-3"><a href="data-management.html#cb11-3" aria-hidden="true" tabindex="-1"></a>maxage <span class="ot">&lt;-</span> sleep<span class="sc">$</span>age</span>
<span id="cb11-4"><a href="data-management.html#cb11-4" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age_norm<span class="ot">&lt;-</span> </span>
<span id="cb11-5"><a href="data-management.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  (sleep<span class="sc">$</span>age<span class="sc">-</span>minage)<span class="sc">/</span>(maxage<span class="sc">-</span>minage)</span>
<span id="cb11-6"><a href="data-management.html#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co"># standardization (z-score)</span></span>
<span id="cb11-7"><a href="data-management.html#cb11-7" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age_std<span class="ot">&lt;-</span> </span>
<span id="cb11-8"><a href="data-management.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  (sleep<span class="sc">$</span>age<span class="sc">-</span><span class="fu">mean</span>(sleep<span class="sc">$</span>age))<span class="sc">/</span><span class="fu">sd</span>(sleep<span class="sc">$</span>age)</span></code></pre></div>
<p><em>Note</em>: be careful if you have missing values you should add <em>na.rm=TRUE</em> as argument in your function calls.</p>
</div>
<div id="stata-19" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-19" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax are really similar with <strong>Stata</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb12-1"><a href="data-management.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> age_log = <span class="fu">ln</span>(age)</span>
<span id="cb12-2"><a href="data-management.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> age_sqr = age^2</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb13-1"><a href="data-management.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// normalization</span></span>
<span id="cb13-2"><a href="data-management.html#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> age_norm = (age-23)/74-23</span>
<span id="cb13-3"><a href="data-management.html#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">// standardization</span></span>
<span id="cb13-4"><a href="data-management.html#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> age_std = (age-47.69)/10.69</span></code></pre></div>
</div>
</div>
<div id="from-continuous-to-categorical" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> From continuous to categorical<a href="data-management.html#from-continuous-to-categorical" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In epidemiology and data sciences more globally, you often need to convert numerical variable into to groups, i.e. a categorical variable. Here is an example with age as a continuous variable that you split into age groups.</p>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div id="r-20" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-20" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong>, you can use the function <em>cut()</em> to split into intervals (equal or not) a quantitative variable. The 3 main arguments of the function are:</p>
<ul>
<li>breaks : interval using number as boundaries</li>
<li>include.lowest: whether or not you include the lowest value if the data series</li>
<li>right : whether or not you include the upper-bound value of the interval in your group (inclusion is symbolized by <code>]</code> and exclusion by <code>)</code>.</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-management.html#cb14-1" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>age_group <span class="ot">&lt;-</span> <span class="fu">cut</span>(sleep<span class="sc">$</span>age, </span>
<span id="cb14-2"><a href="data-management.html#cb14-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">20</span>,<span class="dv">40</span>,<span class="dv">60</span>,<span class="dv">80</span>),</span>
<span id="cb14-3"><a href="data-management.html#cb14-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">include.lowest=</span><span class="cn">TRUE</span>, </span>
<span id="cb14-4"><a href="data-management.html#cb14-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">right =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="stata-20" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-20" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong> the syntax is quite similar</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb15-1"><a href="data-management.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> age_group = <span class="fu">cut</span>(age),<span class="fu">at</span>(20,40,60,80)</span></code></pre></div>
</div>
</div>
<div id="dummy-variables" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Dummy variables<a href="data-management.html#dummy-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A dummy variable is one that takes only the value 0 or 1 to indicate the absence or presence of some categorical effect that may be expected to shift the outcome.</p>
<p>Dummy variable are often create as the result of a conditional expression. The table below presents the differents symbols avaible in <strong>R</strong> and <strong>Stata</strong> for conditional testing.</p>
<table>
<thead>
<tr class="header">
<th align="center">Sign</th>
<th align="center">Definition</th>
<th align="center">TRUE.</th>
<th align="center">FALSE.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">==</td>
<td align="center">equality</td>
<td align="center">3 == 3</td>
<td align="center">3 == 4</td>
</tr>
<tr class="even">
<td align="center">!=</td>
<td align="center">not equality</td>
<td align="center">3 != 4</td>
<td align="center">3 != 3</td>
</tr>
<tr class="odd">
<td align="center">&gt;</td>
<td align="center">greater than</td>
<td align="center">4 &gt; 2</td>
<td align="center">3 &gt; 4</td>
</tr>
<tr class="even">
<td align="center">&lt;</td>
<td align="center">less than</td>
<td align="center">3 &lt; 4</td>
<td align="center">4 &lt; 2</td>
</tr>
<tr class="odd">
<td align="center">&gt;=</td>
<td align="center">greater than or equal to</td>
<td align="center">4 &gt;= 3</td>
<td align="center">4 &gt;= 5</td>
</tr>
<tr class="even">
<td align="center">&lt;=</td>
<td align="center">less than or equal to</td>
<td align="center">4 &lt;= 5</td>
<td align="center">4 &lt;= 3</td>
</tr>
<tr class="odd">
<td align="center">&amp;</td>
<td align="center">and (both statements are true)</td>
<td align="center">(4 &gt; 2) &amp; (3 == 3))</td>
<td align="center">(4 &gt; 2) &amp; (1 &gt; 2)</td>
</tr>
<tr class="even">
<td align="center">|</td>
<td align="center">or (either statement is true)</td>
<td align="center">(3 == 2) | (1 &lt;= 2)</td>
<td align="center">(4 &lt; 2) | (1 &gt; 2)</td>
</tr>
</tbody>
</table>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div id="r-21" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-21" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The combination of any of the above symbols with the <em>ifelse()</em> function useful for creating a dummy variable based on conditional testing as you can assign 0/1 values (or any specified values) to your variable depending on whether the element of test is TRUE or FALSE. As example, we create below</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-management.html#cb16-1" aria-hidden="true" tabindex="-1"></a>sleep<span class="sc">$</span>obese <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(sleep<span class="sc">$</span>bmi <span class="sc">&gt;</span> <span class="dv">30</span>,  <span class="dv">1</span>, <span class="dv">0</span>)</span></code></pre></div>
<p>Note that with <strong>R</strong> there is more than one way of doing things and if you adopt the use of <em>tidyverse</em> suite of packages or the <em>data.table</em> library you might use other functions. Here are examples:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-management.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># with dplyr</span></span>
<span id="cb17-2"><a href="data-management.html#cb17-2" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> sleep </span>
<span id="cb17-3"><a href="data-management.html#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="st">&quot;obese&quot;</span><span class="ot">=</span> <span class="fu">as.numeric</span>(bmi<span class="sc">&gt;</span><span class="dv">25</span>))</span>
<span id="cb17-4"><a href="data-management.html#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co">#with data.table</span></span>
<span id="cb17-5"><a href="data-management.html#cb17-5" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> <span class="fu">data.table</span>(sleep) </span>
<span id="cb17-6"><a href="data-management.html#cb17-6" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> sleep[ , obese<span class="sc">:</span><span class="er">=</span><span class="fu">ifelse</span>(bmi <span class="sc">&gt;</span> <span class="dv">25</span>,  <span class="dv">1</span>, <span class="dv">0</span>)]</span></code></pre></div>
</div>
<div id="stata-21" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-21" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong> the commands are similar:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb18-1"><a href="data-management.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> obese = 0 </span>
<span id="cb18-2"><a href="data-management.html#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> obese = 1 <span class="kw">if</span> bmi&gt;30</span>
<span id="cb18-3"><a href="data-management.html#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">//handling possible missing values</span></span>
<span id="cb18-4"><a href="data-management.html#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> obese = . <span class="kw">if</span> <span class="fu">missing</span>(bmi)</span></code></pre></div>
<p>Or you can do</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb19-1"><a href="data-management.html#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> obese = bmi&gt;30 <span class="kw">if</span> !<span class="fu">missing</span>(bmi)</span></code></pre></div>
</div>
</div>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div id="r-22" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-22" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong> and the library tidyverse, you can transform a long variable to wide. You can return boolean data to create dummy variable or even use other values from another variable.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-management.html#cb20-1" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> sleep <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">i=</span><span class="dv">1</span>) </span>
<span id="cb20-2"><a href="data-management.html#cb20-2" aria-hidden="true" tabindex="-1"></a>      <span class="sc">%&gt;%</span> <span class="fu">spread</span>(gender, i, <span class="at">fill=</span><span class="dv">0</span>)</span></code></pre></div>
</div>
<div id="stata-22" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-22" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong> the function tabulate with the generate() option will generate a whole sets of dummy variables.</p>
<p>If you type as below you will see a frequency table of how many times gender takes on each of those values.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb21-1"><a href="data-management.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabulate</span> gender</span></code></pre></div>
<p>If you type as below you will see the table, and tabulate will create variable names male, female that take on values 1 and 0, male being 1 when gender==male, female being 1 when gender==female.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb22-1"><a href="data-management.html#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tabulate</span> <span class="fu">group</span>, <span class="kw">generate</span>(g)</span></code></pre></div>
</div>
</div>
</div>
<div id="merging-data-set" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Merging data set<a href="data-management.html#merging-data-set" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Merging or joining data set can be particularly useful when enriching your data from multiple sources.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div id="r-23" class="section level3 unnumbered hasAnchor">
<h3>R<a href="data-management.html#r-23" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>R</strong> there is more than way way of doing things. The base function is <em>merge()</em>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-management.html#cb23-1" aria-hidden="true" tabindex="-1"></a>dayconcentration <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;DayConcentration.txt&quot;</span>, <span class="at">header=</span><span class="cn">TRUE</span>, <span class="at">sep=</span><span class="st">&quot;</span><span class="sc">\t</span><span class="st">&quot;</span>)</span>
<span id="cb23-2"><a href="data-management.html#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the commun key do not have the same label so it need to be specified</span></span>
<span id="cb23-3"><a href="data-management.html#cb23-3" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> <span class="fu">merge</span>(sleep, dayconcentration, <span class="at">by.x=</span><span class="st">&quot;number&quot;</span>, <span class="at">by.y=</span><span class="st">&quot;id&quot;</span>)</span>
<span id="cb23-4"><a href="data-management.html#cb23-4" aria-hidden="true" tabindex="-1"></a>sleep[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="fu">c</span>(<span class="st">&quot;number&quot;</span>,<span class="st">&quot;age&quot;</span>, <span class="st">&quot;concentration_mark&quot;</span>)]  </span></code></pre></div>
<pre><code>##   number age concentration_mark
## 1      1  48                5.0
## 2      2  58                1.5
## 3      3  48                4.0
## 4      4  68                1.5
## 5      5  55                3.5</code></pre>
<p>You can use the all.x=TRUE or all.y=TRUE arguments to specify the merging mode. With tidyverse, you can also use different convenient functions <em>left_join()</em>, <em>right_join()</em>, and <em>full_join()</em></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-management.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># all values of the sleep data set are kept </span></span>
<span id="cb25-2"><a href="data-management.html#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># non match in dayconcentration are ignored</span></span>
<span id="cb25-3"><a href="data-management.html#cb25-3" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sleep, dayconcentration, <span class="at">by=</span><span class="fu">c</span> (<span class="st">&quot;number&quot;</span><span class="ot">=</span><span class="st">&quot;id&quot;</span>))</span>
<span id="cb25-4"><a href="data-management.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># all values of dayconcentration are kept </span></span>
<span id="cb25-5"><a href="data-management.html#cb25-5" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span><span class="fu">right_join</span>(sleep, dayconcentration, <span class="at">by=</span><span class="fu">c</span> (<span class="st">&quot;number&quot;</span><span class="ot">=</span><span class="st">&quot;id&quot;</span>))</span>
<span id="cb25-6"><a href="data-management.html#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="co"># all values are kept </span></span>
<span id="cb25-7"><a href="data-management.html#cb25-7" aria-hidden="true" tabindex="-1"></a>sleep <span class="ot">&lt;-</span><span class="fu">full_join</span>(sleep, dayconcentration, <span class="at">by=</span><span class="fu">c</span> (<span class="st">&quot;number&quot;</span><span class="ot">=</span><span class="st">&quot;id&quot;</span>))</span></code></pre></div>
<p>Note that the common key can be composed of more than one variable. See help pages for details.</p>
</div>
<div id="stata-23" class="section level3 unnumbered hasAnchor">
<h3>Stata<a href="data-management.html#stata-23" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In <strong>Stata</strong> the merging is less trivial than in R. The two datasets cannot be opened in Stata at the same time and <strong>the common (key) variables must have the same name</strong>.</p>
<p>Make sure that:</p>
<ul>
<li>both datasets are sorted by all the ids and save as dta<br />
</li>
<li>one dataset is loaded into Stata (in this case sleep),<br />
</li>
<li>use the merge function but make sure to map where the using data is located (in this case for example “c:.dta”)</li>
</ul>
<div class="sourceCode" id="cb26"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb26-1"><a href="data-management.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span>  number <span class="kw">using</span> dayconcentration</span></code></pre></div>
</div>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-type-and-data-format.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="descriptive-statistics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/03_r_stata_datamanagement.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
